version: "3.9"

services:
  api:
    image: gtfs-manager-api:dev   # <â€” DODANE
    build:
      context: ./backend/gtfs-manager
      dockerfile: Dockerfile
    container_name: gtfs-manager-api
    environment:
      ASPNETCORE_URLS: http://0.0.0.0:5089
      Gtfs__DataDir: /app/Data
      ASPNETCORE_ENVIRONMENT: Development
    ports:
      - "5089:5089"
    volumes:
      - ./backend/gtfs-manager:/src
      - ./backend/gtfs-manager/Data:/app/Data
    working_dir: /src
    command: ["dotnet","watch","run","--urls","http://0.0.0.0:5089"]
    networks: [appnet]

  web:
    build:
      context: ./front
      dockerfile: Dockerfile
    container_name: gtfs-front
    ports:
      - "5173:5173"
    depends_on:
      - api
    command: ["dotnet","watch","run","--urls","http://0.0.0.0:8080"]
    networks: [appnet]

networks:
  appnet:
    driver: bridge
